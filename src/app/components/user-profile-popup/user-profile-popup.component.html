<div class="popup__wrap" [class.open]="isOpen">
  <div class="popup">
    <div class="popup__top">
      <h2>Идентификация аккаунта</h2>
    </div>

    <svg-icon [iconID]="iconClose" (click)="closePopUp()"></svg-icon>

    <stepper [stepperData]="stepperData"></stepper>

    <div class="popup__down">
      @if (step === 0) {
        <h3>Персональные данные:</h3>
        <form [formGroup]="userForm">
          <div class="popup__down--name">
            <span>Имя</span>
            <input-text
              formControlName="name"
              placeholder="Введите имя"
            ></input-text>
            @if (userForm.invalid && (userForm.dirty || userForm.touched)) {
              @if (userForm.get("name")?.errors?.["required"]) {
                <span class="spanErr">Обязательное поле</span>
              }
              @if (userForm.get("name")?.errors?.["minlength"]) {
                <span class="spanErr">В поле не менее 3 символов</span>
              }
              @if (userForm.get("name")?.errors?.["numbersInName"]) {
                <span class="spanErr">Некорректное имя</span>
              }
            }
          </div>

          <div class="popup__down--lastName">
            <span>Фамилия</span>
            <input-text
              formControlName="lastName"
              placeholder="Введите фамилию"
            ></input-text>
            @if (userForm.invalid && (userForm.dirty || userForm.touched)) {
              @if (userForm.get("lastName")?.errors?.["required"]) {
                <span class="spanErr">Обязательное поле</span>
              }
              @if (userForm.get("lastName")?.errors?.["minlength"]) {
                <span class="spanErr">В поле не менее 2 символов</span>
              }
              @if (userForm.get("lastName")?.errors?.["numbersInName"]) {
                <span class="spanErr">Некорректное имя</span>
              }
            }
          </div>

          <div class="popup__down--email">
            <span>E-mail</span>
            <input-text
              formControlName="email"
              placeholder="Введите E-mail"
            ></input-text>
            @if (userForm.invalid && (userForm.dirty || userForm.touched)) {
              @if (userForm.get("email")?.errors?.["required"]) {
                <span class="spanErr">Обязательное поле</span>
              }
              @if (userForm.get("email")?.errors?.["minlength"]) {
                <span class="spanErr">В поле не менее 2 символов</span>
              }
              @if (userForm.get("email")?.errors?.["numbersInName"]) {
                <span class="spanErr">Некорректное имя</span>
              }
            }
          </div>

          <span>Страна</span>
          <dropdown
            formControlName="country"
            [defaultValue]="countryDefaultValue"
            [dropdownItems]="countryDropdownItems"
          ></dropdown>

          <span>Город</span>
          <dropdown
            formControlName="city"
            [defaultValue]="cityDefaultValue"
            [dropdownItems]="cityDropdownItems"
          ></dropdown>
        </form>
      }
      <div class="button">
        <app-buttons
          [text]="button.text"
          [borderStyle]="button.borderStyle"
          (click)="nextStep()"
        ></app-buttons>
      </div>
    </div>
  </div>
</div>
